{"remainingRequest":"D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\dlz\\Api_Platform\\v_project\\src\\views\\Monitor.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\src\\views\\Monitor.vue","mtime":1668866128862},{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\babel.config.js","mtime":1662281751153},{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662281752768},{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662281757899},{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\babel-loader\\lib\\index.js","mtime":1662281752427},{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662281752768},{"path":"D:\\Git\\dlz\\Api_Platform\\v_project\\node_modules\\vue-loader\\lib\\index.js","mtime":1662281758072}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport Menu from \"@/components/Menu\";\nimport Report from \"@/components/Report\";\nexport default {\n  name: \"Monitor\",\n  data: function data() {\n    return {\n      dialogFormVisible1: false,\n      dialogFormVisible2: false,\n      look_report_project_id: '',\n      monitor_list: [],\n      form_data: {}\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    axios.get('/get_monitor_list/').then(function (res) {\n      _this.monitor_list = res.data;\n    });\n  },\n  methods: {\n    getColor: function getColor(result) {\n      if (result.toString() == 'true') {\n        return 'green';\n      } else {\n        return 'red';\n      }\n    },\n    change_jkfs: function change_jkfs() {\n      this.form_data.value = ''; // 清空之前的值\n\n      if (this.form_data.method == '接口触发') {\n        this.form_data.value = process.env.VUE_APP_BASE_URL + '/run/?project_id=' + this.form_data.project_id;\n      }\n    },\n    add_monitor: function add_monitor() {\n      var _this2 = this;\n\n      axios.get('/add_monitor/').then(function (res) {\n        _this2.monitor_list = res.data;\n      });\n    },\n    change_monitor_status: function change_monitor_status(id) {\n      var _this3 = this;\n\n      axios.get('/change_monitor_status/', {\n        params: {\n          id: id\n        }\n      }).then(function (res) {\n        _this3.monitor_list = res.data;\n      });\n    },\n    look_report: function look_report(project_id) {\n      this.dialogFormVisible2 = true;\n      this.look_report_project_id = project_id;\n    },\n    set_monitor: function set_monitor(index) {\n      this.dialogFormVisible1 = true;\n      this.form_data = this.monitor_list[index];\n    },\n    delete_monitor: function delete_monitor(id) {\n      var _this4 = this;\n\n      axios.get('/delete_monitor/', {\n        params: {\n          id: id\n        }\n      }).then(function (res) {\n        _this4.monitor_list = res.data;\n      });\n    },\n    save_monitor: function save_monitor() {\n      var _this5 = this;\n\n      axios.post('/save_monitor/', this.form_data).then(function (res) {\n        _this5.monitor_list = res.data;\n        _this5.dialogFormVisible1 = false;\n      });\n    }\n  },\n  components: {\n    Menu: Menu,\n    Report: Report\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AAEA;EACAA,eADA;EAEAC,IAFA,kBAEA;IACA;MACAC,yBADA;MAEAC,yBAFA;MAGAC,0BAHA;MAIAC,gBAJA;MAKAC;IALA;EASA,CAZA;EAaAC,OAbA,qBAaA;IAAA;;IACAC;MACA;IACA,CAFA;EAIA,CAlBA;EAmBAC;IACAC,QADA,oBACAC,MADA,EACA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAPA;IAQAC,WARA,yBAQA;MACA,0BADA,CACA;;MACA;QACA;MACA;IAEA,CAdA;IAeAC,WAfA,yBAeA;MAAA;;MACAL;QACA;MACA,CAFA;IAGA,CAnBA;IAoBAM,qBApBA,iCAoBAC,EApBA,EAoBA;MAAA;;MACAP;QACAQ;UACAD;QADA;MADA,GAIAE,IAJA,CAIA;QACA;MACA,CANA;IAQA,CA7BA;IA8BAC,WA9BA,uBA8BAC,UA9BA,EA8BA;MACA;MACA;IAEA,CAlCA;IAmCAC,WAnCA,uBAmCAC,KAnCA,EAmCA;MACA;MACA;IAEA,CAvCA;IAwCAC,cAxCA,0BAwCAP,EAxCA,EAwCA;MAAA;;MACAP;QACAQ;UACAD;QADA;MADA,GAIAE,IAJA,CAIA;QACA;MACA,CANA;IAOA,CAhDA;IAiDAM,YAjDA,0BAiDA;MAAA;;MACAf;QACA;QACA;MACA,CAHA;IAIA;EAtDA,CAnBA;EA4EAgB;IACAC,UADA;IAEAC;EAFA;AA5EA","names":["name","data","dialogFormVisible1","dialogFormVisible2","look_report_project_id","monitor_list","form_data","mounted","axios","methods","getColor","result","change_jkfs","add_monitor","change_monitor_status","id","params","then","look_report","project_id","set_monitor","index","delete_monitor","save_monitor","components","Menu","Report"],"sourceRoot":"src/views","sources":["Monitor.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-container style=\"height: 100%\">\r\n      <el-aside width=\"200px\">\r\n        <Menu></Menu>\r\n      </el-aside>\r\n      <el-main>\r\n        <h1>线上监控模块（监控或定时等方式执行具体项目大用例）</h1>\r\n        <el-table\r\n            :data=\"monitor_list\"\r\n            stripe\r\n            border\r\n            style=\"min-height: 100%;min-width: 100%;overflow-y: auto;\">\r\n          <el-table-column\r\n              prop=\"id\"\r\n              label=\"ID\"\r\n              width=\"100%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"label\"\r\n              label=\"名称\"\r\n              width=\"100%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"project_id\"\r\n              label=\"项目id\"\r\n              width=\"100%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"status\"\r\n              label=\"状态\"\r\n              width=\"100%\">\r\n            <template slot-scope=\"scope\">\r\n              <span :style=\"{color:getColor(scope.row.status)}\">{{ scope.row.status }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"next\"\r\n              label=\"下次执行时间\"\r\n              width=\"160%\">\r\n          </el-table-column>\r\n          <el-table-column>\r\n            <template slot=\"header\">\r\n              <el-button @click=\"add_monitor\">新增监控</el-button>\r\n            </template>\r\n            <template slot-scope=\"scope\">\r\n              <el-button @click=\"change_monitor_status(scope.row.id)\" size=\"mini\" type=\"success\">开关</el-button>\r\n              <el-button @click=\"look_report(scope.row.project_id)\" size=\"mini\" type=\"default\">历史报告</el-button>\r\n              <el-button @click=\"set_monitor(scope.$index)\" size=\"mini\" type=\"default\">编辑</el-button>\r\n              <el-button @click=\"delete_monitor(scope.row.id)\" size=\"mini\" type=\"danger\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n\r\n        </el-table>\r\n\r\n      </el-main>\r\n    </el-container>\r\n\r\n    <el-dialog :visible.sync=\"dialogFormVisible1\" width=\"60%\">\r\n      <el-form :model=\"form_data\">\r\n        <el-form-item label=\"监控名称\" label-width=\"120px\">\r\n          <el-input v-model=\"form_data.label\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"关联项目id\" label-width=\"120px\">\r\n          <el-input v-model=\"form_data.project_id\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"监控方式\" label-width=\"120px\">\r\n          <el-radio-group v-model=\"form_data.method\" @change=\"change_jkfs\">\r\n            <el-radio label=\"间隔时间\">间隔(分)</el-radio>\r\n            <el-radio label=\"每日定时\">每日定时(24小时制如：17：22)</el-radio>\r\n            <el-radio label=\"接口触发\">接口触发(不可修改)</el-radio>\r\n            <el-radio label=\"Jenkins语法\">Jenkins语法</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"设置值\" label-width=\"120px\">\r\n          <el-input v-model=\"form_data.value\">请输入对应的值</el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"邮件接收地址\" label-width=\"120px\">\r\n          <el-input v-model=\"form_data.email\" placeholder=\"多个用英文逗号,隔开\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"开关状态\" label-width=\"120px\">\r\n          <el-input v-model=\"form_data.status\" disabled ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机器人\" label-width=\"120px\">\r\n          <el-input v-model=\"form_data.robot\" ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible1=false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save_monitor\">保存</el-button>\r\n\r\n      </div>\r\n\r\n    </el-dialog>\r\n\r\n    <el-dialog :visible.sync=\"dialogFormVisible2\">\r\n      <Report :project_id=\"look_report_project_id\" v-if=\"dialogFormVisible2\"></Report>\r\n    </el-dialog>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Menu from \"@/components/Menu\";\r\nimport Report from \"@/components/Report\";\r\n\r\nexport default {\r\n  name: \"Monitor\",\r\n  data() {\r\n    return {\r\n      dialogFormVisible1:false,\r\n      dialogFormVisible2:false,\r\n      look_report_project_id: '',\r\n      monitor_list: [],\r\n      form_data: {},\r\n\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    axios.get('/get_monitor_list/').then(res => {\r\n      this.monitor_list = res.data\r\n    })\r\n\r\n  },\r\n  methods: {\r\n    getColor(result) {\r\n      if (result.toString() == 'true') {\r\n        return 'green'\r\n      } else {\r\n        return 'red'\r\n      }\r\n    },\r\n    change_jkfs(){\r\n      this.form_data.value=''; // 清空之前的值\r\n       if (this.form_data.method=='接口触发'){\r\n          this.form_data.value = process.env.VUE_APP_BASE_URL+'/run/?project_id='+this.form_data.project_id;\r\n        }\r\n\r\n    },\r\n    add_monitor() {\r\n      axios.get('/add_monitor/').then(res => {\r\n        this.monitor_list = res.data;\r\n      })\r\n    },\r\n    change_monitor_status(id) {\r\n      axios.get('/change_monitor_status/', {\r\n        params: {\r\n          id: id\r\n        }\r\n      }).then(res => {\r\n        this.monitor_list = res.data\r\n      })\r\n\r\n    },\r\n    look_report(project_id) {\r\n      this.dialogFormVisible2=true;\r\n      this.look_report_project_id = project_id\r\n\r\n    },\r\n    set_monitor(index) {\r\n      this.dialogFormVisible1=true;\r\n      this.form_data = this.monitor_list[index];\r\n\r\n    },\r\n    delete_monitor(id) {\r\n      axios.get('/delete_monitor/', {\r\n        params: {\r\n          id: id\r\n        }\r\n      }).then(res => {\r\n        this.monitor_list = res.data\r\n      })\r\n    },\r\n    save_monitor(){\r\n      axios.post('/save_monitor/',this.form_data).then(res=>{\r\n        this.monitor_list=res.data;\r\n        this.dialogFormVisible1=false;\r\n      })\r\n    },\r\n\r\n  },\r\n  components: {\r\n    Menu,\r\n    Report,\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}